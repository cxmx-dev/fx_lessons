<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Three.js Ambient Occlusion Scene</title><style>body{margin:0;overflow:hidden;background:#000;font-family:Arial,sans-serif}canvas{display:block}#loading{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;font-size:18px;z-index:1000}.controls{position:fixed;bottom:20px;left:20px;color:#fff;font-size:14px;z-index:1000}.controls h3{margin:0 0 10px 0}.controls ul{margin:0;padding-left:20px}</style></head><body><div id="loading">Loading 3D Scene...</div><div class="controls"><h3>Controls:</h3><ul><li>WASD - Move Camera</li><li>Arrow Keys - Rotate Mesh</li><li>Mouse - Orbit View</li><li>Scroll - Zoom</li></ul></div><script type="importmap">{"imports":{"three":"https://unpkg.com/three@0.158.0/build/three.module.js","three/addons/":"https://unpkg.com/three@0.158.0/examples/jsm/"}}</script><script type="module">import*as THREE from'three';import{OrbitControls}from'three/addons/controls/OrbitControls.js';import{EffectComposer}from'three/addons/postprocessing/EffectComposer.js';import{RenderPass}from'three/addons/postprocessing/RenderPass.js';import{SSAOPass}from'three/addons/postprocessing/SSAOPass.js';let scene,camera,renderer,composer,controls,ssaoPass,mesh,wireframe,particles,particlesGeometry,wavePhases,time=0,inputs={keyboard:{move:{x:0,z:0},rotate:{x:0,y:0}},gamepad:{connected:!1,axes:[0,0,0,0],buttons:[]},microphone:{amplitude:0}};function createFallbackScene(){const s=new THREE.Scene(),c=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3);c.position.z=5;const r=new THREE.WebGLRenderer();r.setSize(window.innerWidth,window.innerHeight);document.body.appendChild(r.domElement);const g=new THREE.BoxGeometry,m=new THREE.MeshBasicMaterial({color:65280}),cube=new THREE.Mesh(g,m);s.add(cube);function animate(){requestAnimationFrame(animate);cube.rotation.x+=.01;cube.rotation.y+=.01;r.render(s,c)}animate();document.getElementById('loading').style.display='none'}function initScene(){try{scene=new THREE.Scene;camera=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3);camera.position.set(0,3,10);renderer=new THREE.WebGLRenderer({antialias:!0});renderer.setSize(window.innerWidth,window.innerHeight);renderer.setPixelRatio(Math.min(window.devicePixelRatio,2));document.body.appendChild(renderer.domElement);try{composer=new EffectComposer(renderer);const rp=new RenderPass(scene,camera);composer.addPass(rp);ssaoPass=new SSAOPass(scene,camera,window.innerWidth,window.innerHeight);ssaoPass.kernelRadius=32;ssaoPass.kernelSize=32;ssaoPass.minDistance=1e-4;ssaoPass.maxDistance=.02;ssaoPass.output=SSAOPass.OUTPUT.Default;composer.addPass(ssaoPass)}catch(e){composer=null;ssaoPass=null}const detail=5,geometry=new THREE.IcosahedronGeometry(1.5,detail),positions=geometry.attributes.position;for(let i=0;i<positions.count;i++){const v=new THREE.Vector3().fromBufferAttribute(positions,i),noise=(Math.sin(10*v.x)+Math.cos(10*v.y)+Math.sin(10*v.z))*.1;v.normalize().multiplyScalar(1.5+noise);positions.setXYZ(i,v.x,v.y,v.z)}geometry.computeVertexNormals();const material=new THREE.MeshStandardMaterial({color:44792,roughness:.8,metalness:.2});mesh=new THREE.Mesh(geometry,material);scene.add(mesh);const wireframeGeometry=new THREE.EdgesGeometry(geometry),wireframeMaterial=new THREE.LineBasicMaterial({color:0,linewidth:2});wireframe=new THREE.LineSegments(wireframeGeometry,wireframeMaterial);scene.add(wireframe);const particleCount=1200;particlesGeometry=new THREE.BufferGeometry;const particlePositions=new Float32Array(3*particleCount);wavePhases=new Float32Array(particleCount);for(let i=0;i<particleCount;i++){const x=.3*(i%40-20),z=.3*(Math.floor(i/40)-15);particlePositions[3*i]=x;particlePositions[3*i+1]=0;particlePositions[3*i+2]=z;wavePhases[i]=2*Math.PI*Math.random()}particlesGeometry.setAttribute('position',new THREE.BufferAttribute(particlePositions,3));const particleMaterial=new THREE.PointsMaterial({color:16711815,size:.05});particles=new THREE.Points(particlesGeometry,particleMaterial);scene.add(particles);const ambientLight=new THREE.AmbientLight(4210752,.5);scene.add(ambientLight);const directionalLight=new THREE.DirectionalLight(16777215,1.2);directionalLight.position.set(4,5,4);scene.add(directionalLight);try{controls=new OrbitControls(camera,renderer.domElement);controls.enableDamping=!0;controls.dampingFactor=.1}catch(e){controls=null}setupInputs();window.addEventListener('resize',onWindowResize);animate();document.getElementById('loading').style.display='none'}catch(e){createFallbackScene()}}function setupInputs(){document.addEventListener('keydown',e=>{switch(e.code){case'KeyW':inputs.keyboard.move.z=-1;break;case'KeyS':inputs.keyboard.move.z=1;break;case'KeyA':inputs.keyboard.move.x=-1;break;case'KeyD':inputs.keyboard.move.x=1;break;case'ArrowUp':inputs.keyboard.rotate.x=-1;break;case'ArrowDown':inputs.keyboard.rotate.x=1;break;case'ArrowLeft':inputs.keyboard.rotate.y=-1;break;case'ArrowRight':inputs.keyboard.rotate.y=1}});document.addEventListener('keyup',e=>{switch(e.code){case'KeyW':case'KeyS':inputs.keyboard.move.z=0;break;case'KeyA':case'KeyD':inputs.keyboard.move.x=0;break;case'ArrowUp':case'ArrowDown':inputs.keyboard.rotate.x=0;break;case'ArrowLeft':case'ArrowRight':inputs.keyboard.rotate.y=0}});window.addEventListener('gamepadconnected',e=>{inputs.gamepad.connected=!0});window.addEventListener('gamepaddisconnected',()=>{inputs.gamepad.connected=!1})}function onWindowResize(){if(camera&&renderer){camera.aspect=window.innerWidth/window.innerHeight;camera.updateProjectionMatrix();renderer.setSize(window.innerWidth,window.innerHeight);composer&&composer.setSize(window.innerWidth,window.innerHeight);ssaoPass&&ssaoPass.setSize(window.innerWidth,window.innerHeight)}}function animate(){requestAnimationFrame(animate);time+=.02;try{if(inputs.gamepad.connected){const gamepad=navigator.getGamepads()[0];gamepad&&(inputs.gamepad.axes=gamepad.axes,inputs.gamepad.buttons=gamepad.buttons)}if(mesh&&wireframe){mesh.rotation.x+=(inputs.keyboard.rotate.x+inputs.gamepad.axes[3])*.05;mesh.rotation.y+=(inputs.keyboard.rotate.y+inputs.gamepad.axes[2])*.05;wireframe.rotation.copy(mesh.rotation);mesh.scale.setScalar(1+.1*Math.cos(2*time));wireframe.scale.copy(mesh.scale)}if(camera){const moveSpeed=.15;camera.position.x+=(inputs.keyboard.move.x+inputs.gamepad.axes[0])*moveSpeed;camera.position.z+=(inputs.keyboard.move.z+inputs.gamepad.axes[1])*moveSpeed}if(particlesGeometry&&wavePhases){const particlePositions=particlesGeometry.attributes.position.array,particleCount=wavePhases.length;for(let i=0;i<particleCount;i++){const x=particlePositions[3*i],z=particlePositions[3*i+2],wave=Math.sin(time+.5*x+.5*z+wavePhases[i])*(.5+inputs.microphone.amplitude);particlePositions[3*i+1]=wave}particlesGeometry.attributes.position.needsUpdate=!0}}catch(e){}controls&&controls.update();composer?composer.render():renderer&&scene&&camera&&renderer.render(scene,camera)}document.addEventListener('contextmenu',e=>e.preventDefault());initScene();</script></body></html>